(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12271,        341]
NotebookOptionsPosition[     10723,        309]
NotebookOutlinePosition[     11088,        325]
CellTagsIndexPosition[     11045,        322]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"clear", " ", "all", " ", "time"}], "-", 
    RowBox[{"point", " ", "detectors"}]}], " ", "*)"}], " ", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"isDet", "[", "PI", "]"}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"Clear", "[", " ", "#", " ", "]"}], "&"}], " ", "/@", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"#", "[", "\"\<name\>\"", "]"}], "&"}], "/@", " ", 
        RowBox[{"(", 
         RowBox[{"detSeq", "[", 
          RowBox[{"PI", ",", " ", "1", ",", " ", "winSize"}], "]"}], " ", 
         ")"}]}], ")"}]}]}], "]"}], ";"}]}]], "Input",
 FontSize->16,
 CellLabel->
  "In[399]:=",ExpressionUUID->"acf10379-6ef2-41b7-b986-26afe2154be4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Clear", "[", 
   RowBox[{"PI", ",", " ", "ersDet", ",", " ", "winSize"}], "]"}], 
  ";"}]], "Input",
 FontSize->16,
 CellLabel->
  "In[400]:=",ExpressionUUID->"1934fe86-f5c0-4785-8a17-14abe2186a15"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "parameter", " ", "for", " ", "the", " ", "rest", " ", "of", " ", "the", 
    " ", "script"}], " ", "*)"}], " ", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"winSize", "  ", "=", " ", "1"}], ";"}], " ", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"createDet", "[", "\"\<PI\>\"", "]"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.774785688816557*^9, 3.7747856898857527`*^9}, 
   3.774785744636779*^9},
 FontSize->16,
 CellLabel->
  "In[401]:=",ExpressionUUID->"c79b25a5-d115-4a37-8bf0-9aa77f7935f7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"general", " ", "definition"}], " ", "*)"}], " ", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"ersDet", "[", "t_", "]"}], " ", "=", " ", 
     RowBox[{
      RowBox[{
       SubscriptBox["\[Not]", "w"], "PI"}], " ", 
      SubscriptBox["\[And]", "d"], " ", 
      RowBox[{
       SubscriptBox["\[Not]", "s"], 
       RowBox[{
        SubscriptBox["F", 
         RowBox[{"1", ",", "t"}]], " ", "PI"}]}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"and", " ", "a", " ", "concrete", " ", "instance"}], ",", " ", 
     RowBox[{
      RowBox[{"to", " ", "instantiate", " ", "appropriate", " ", "time"}], 
      "-", 
      RowBox[{"point", " ", "detectors"}]}]}], " ", "*)"}], " ", 
   "\[IndentingNewLine]", 
   RowBox[{"ersDet", "[", "winSize", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.77478570185154*^9, 3.774785734847563*^9}, {
  3.774791452283044*^9, 3.774791466593746*^9}},
 FontSize->16,
 CellLabel->
  "In[403]:=",ExpressionUUID->"b7821189-750d-4b62-aa6a-0fd445fa19d5"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"\<\"name\"\>", "\[Rule]", "\<\"((NOTSTRPI1)AND(NOTWKPI))\"\>"}], 
   ",", 
   RowBox[{"\<\"ch1\"\>", "\[Rule]", 
    RowBox[{
     RowBox[{"!", "PIch1"}], "&&", 
     RowBox[{"!", 
      RowBox[{"(", 
       RowBox[{"PI1ch1", "||", "PI1nc"}], ")"}]}]}]}], ",", 
   RowBox[{"\<\"ch0\"\>", "\[Rule]", 
    RowBox[{"PI1ch1", "||", "PIch1"}]}], ",", 
   RowBox[{"\<\"h1\"\>", "\[Rule]", 
    RowBox[{
     RowBox[{"!", "PI1h1"}], "&&", 
     RowBox[{"!", "PIh1"}]}]}], ",", 
   RowBox[{"\<\"h0\"\>", "\[Rule]", 
    RowBox[{"PI1h1", "||", "PIh1"}]}], ",", 
   RowBox[{"\<\"nc\"\>", "\[Rule]", 
    RowBox[{"PI1nc", "&&", 
     RowBox[{"!", "PIch1"}]}]}]}], "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{3.774791444925295*^9, 3.774800272300912*^9, 
  3.7748021426085787`*^9},
 CellLabel->
  "Out[404]=",ExpressionUUID->"46f7d93c-caf8-4c35-bac9-b8967334fca5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 StyleBox[
  RowBox[{
   RowBox[{"(*", " ", 
    RowBox[{
    "just", " ", "to", " ", "see", " ", "what", " ", "it", " ", "simplifies", 
     " ", "to"}], " ", "*)"}], " ", "\[IndentingNewLine]", 
   RowBox[{"fpr", "[", 
    RowBox[{"ersDet", "[", "1", "]"}], "]"}]}],
  FontSize->16]], "Input",
 CellChangeTimes->{{3.7747858151674347`*^9, 3.774785821879472*^9}, {
  3.774785860224945*^9, 3.774785860424096*^9}, {3.774786069358667*^9, 
  3.774786075628222*^9}},
 CellLabel->
  "In[405]:=",ExpressionUUID->"55c7157a-76a5-4e19-a979-f11eff3698e3"],

Cell[BoxData[
 RowBox[{"myCondProb", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"!", "PIch1"}], "&&", 
    RowBox[{"!", 
     RowBox[{"(", 
      RowBox[{"PI1ch1", "||", "PI1nc"}], ")"}]}]}], "\[Conditioned]", 
   RowBox[{"!", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"!", "PI1h1"}], "&&", 
      RowBox[{"!", "PIh1"}]}], ")"}]}]}], "]"}]], "Output",
 CellChangeTimes->{{3.7747858467360907`*^9, 3.774785860853718*^9}, 
   3.774791435077241*^9, 3.774800272330552*^9, 3.774802142636063*^9},
 CellLabel->
  "Out[405]=",ExpressionUUID->"a7c7d32e-bd2f-4005-b673-88a3ec712e66"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"INDEPENDENCE", " ", "ASSUMPTIONS"}], " ", "*)"}], " ", 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7747858881369743`*^9, 3.774785896096096*^9}},
 CellLabel->
  "In[406]:=",ExpressionUUID->"ddf4e7c5-fa52-44eb-9264-0ffc55f66722"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Weaker", " ", "version", " ", "of", " ", 
    RowBox[{"assumptions", ":"}]}], " ", "*)"}], " ", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "make", " ", "detections", " ", "independent", " ", "of", " ", "other", 
    " ", "GTs", " ", "given", " ", "their", " ", "own", " ", "GT", " ", 
    "\[IndentingNewLine]", 
    RowBox[{"TODO", ":", " ", 
     RowBox[{
     "somehow", " ", "this", " ", "is", " ", "not", " ", "subsumed", " ", 
      "by", " ", "the", " ", "strong", " ", "assns"}]}]}], " ", "*)"}], " ", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"makeDetIndepOfGTOnGT", "[", 
    RowBox[{"PI", ",", " ", 
     RowBox[{"Sequence", "@@", 
      RowBox[{"detSeq", "[", 
       RowBox[{"PI", ",", " ", "1", ",", " ", "winSize"}], "]"}]}]}], "]"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Stronger", " ", "version", " ", "of", " ", "assumptions"}], " ", 
    "*)"}], " ", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
     "make", " ", "ground", " ", "detections", " ", "independent", " ", "of", 
      " ", "other", " ", "ground", " ", "truths"}], ",", " ", 
     RowBox[{
     "given", " ", "their", " ", "own", " ", "ground", " ", "truth", " ", 
      "and", " ", "other", " ", "stuff"}]}], " ", "*)"}], " ", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"makeDetIndepOfAllGTs", "[", "#", "]"}], "&"}], "/@", " ", 
    RowBox[{"Join", "[", 
     RowBox[{
      RowBox[{"{", "PI", "}"}], ",", " ", 
      RowBox[{"detSeq", "[", 
       RowBox[{"PI", ",", " ", "1", ",", " ", "winSize"}], "]"}]}], "]"}]}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"Strong", " ", 
      RowBox[{"assn", ":", " ", 
       RowBox[{
       "make", " ", "pairs", " ", "of", " ", "detections", " ", 
        "independent"}]}]}], ",", " ", 
     RowBox[{
     "given", " ", "their", " ", "respective", " ", "ground", " ", "truths", 
      " ", "and", " ", "other", " ", "stuff"}]}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"makeDetsPairwiseStrongIndepGivenGTs", "[", 
      RowBox[{
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
       RowBox[{"#", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], "]"}], " ", "&"}], "/@", " ", 
    RowBox[{"DeleteDuplicatesBy", "[", 
     RowBox[{
      RowBox[{"Permutations", "[", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", "PI", "}"}], ",", " ", 
          RowBox[{"detSeq", "[", 
           RowBox[{"PI", ",", " ", "1", ",", " ", "winSize"}], "]"}]}], "]"}],
         ",", " ", 
        RowBox[{"{", "2", "}"}]}], "]"}], ",", " ", 
      RowBox[{
       RowBox[{"Sort", "[", "#", "]"}], " ", "&"}]}], "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.77478590447994*^9, 3.7747859214486094`*^9}, {
  3.7747908562432756`*^9, 3.774790857001526*^9}},
 CellLabel->
  "In[407]:=",ExpressionUUID->"7fe31acb-c4cf-44f7-9f27-bcbbe66d5492"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"True", ",", "True", ",", "True", ",", "True"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"True", ",", "True", ",", "True", ",", "True"}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{3.7747908586520042`*^9, 3.774791474512217*^9, 
  3.774798304138739*^9, 3.774798410742035*^9, 3.7747990843732023`*^9, 
  3.774800272364708*^9, 3.774800304379725*^9, 3.774800858298469*^9, 
  3.7748010424497967`*^9, 3.7748020611848993`*^9, 3.774802142682675*^9},
 CellLabel->
  "Out[407]=",ExpressionUUID->"ad485c44-ac11-476a-8789-6604b421e9f7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"True", ",", "True"}], "}"}]], "Output",
 CellChangeTimes->{3.7747908586520042`*^9, 3.774791474512217*^9, 
  3.774798304138739*^9, 3.774798410742035*^9, 3.7747990843732023`*^9, 
  3.774800272364708*^9, 3.774800304379725*^9, 3.774800858298469*^9, 
  3.7748010424497967`*^9, 3.7748020611848993`*^9, 3.774802142684623*^9},
 CellLabel->
  "Out[408]=",ExpressionUUID->"03aeac6d-8081-4e84-b327-2da5d5414f23"],

Cell[BoxData[
 RowBox[{"{", "True", "}"}]], "Output",
 CellChangeTimes->{3.7747908586520042`*^9, 3.774791474512217*^9, 
  3.774798304138739*^9, 3.774798410742035*^9, 3.7747990843732023`*^9, 
  3.774800272364708*^9, 3.774800304379725*^9, 3.774800858298469*^9, 
  3.7748010424497967`*^9, 3.7748020611848993`*^9, 3.774802142687216*^9},
 CellLabel->
  "Out[409]=",ExpressionUUID->"1fd478b8-c81e-4921-9a87-ee3bf2578063"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"NUMERIC", " ", "ASSUMPTIONS"}], " ", "*)"}], " "}]], "Input",
 CellChangeTimes->{{3.774785938884584*^9, 3.7747859431943483`*^9}, {
  3.774785980313239*^9, 3.7747859804486723`*^9}},
 CellLabel->
  "In[410]:=",ExpressionUUID->"bbf86722-ecbc-429f-bd4d-02992b863303"]
},
WindowSize->{800, 841},
WindowMargins->{{-800, Automatic}, {0, Automatic}},
Magnification:>1.2 Inherited,
FrontEndVersion->"12.0 for Linux x86 (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 801, 24, 146, "Input",ExpressionUUID->"acf10379-6ef2-41b7-b986-26afe2154be4"],
Cell[1362, 46, 233, 7, 43, "Input",ExpressionUUID->"1934fe86-f5c0-4785-8a17-14abe2186a15"],
Cell[1598, 55, 582, 16, 112, "Input",ExpressionUUID->"c79b25a5-d115-4a37-8bf0-9aa77f7935f7"],
Cell[CellGroupData[{
Cell[2205, 75, 1108, 32, 182, "Input",ExpressionUUID->"b7821189-750d-4b62-aa6a-0fd445fa19d5"],
Cell[3316, 109, 931, 25, 103, "Output",ExpressionUUID->"46f7d93c-caf8-4c35-bac9-b8967334fca5"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4284, 139, 558, 14, 78, "Input",ExpressionUUID->"55c7157a-76a5-4e19-a979-f11eff3698e3"],
Cell[4845, 155, 575, 16, 42, "Output",ExpressionUUID->"a7c7d32e-bd2f-4005-b673-88a3ec712e66"]
}, Open  ]],
Cell[5435, 174, 324, 7, 95, "Input",ExpressionUUID->"ddf4e7c5-fa52-44eb-9264-0ffc55f66722"],
Cell[CellGroupData[{
Cell[5784, 185, 3088, 78, 459, "Input",ExpressionUUID->"7fe31acb-c4cf-44f7-9f27-bcbbe66d5492"],
Cell[8875, 265, 600, 13, 42, "Output",ExpressionUUID->"ad485c44-ac11-476a-8789-6604b421e9f7"],
Cell[9478, 280, 441, 8, 42, "Output",ExpressionUUID->"03aeac6d-8081-4e84-b327-2da5d5414f23"],
Cell[9922, 290, 415, 7, 42, "Output",ExpressionUUID->"1fd478b8-c81e-4921-9a87-ee3bf2578063"]
}, Open  ]],
Cell[10352, 300, 367, 7, 95, "Input",ExpressionUUID->"bbf86722-ecbc-429f-bd4d-02992b863303"]
}
]
*)

